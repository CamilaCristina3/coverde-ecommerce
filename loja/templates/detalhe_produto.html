{% load static %}
<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ produto.nome }}</title>
    <link rel="icon" href="{% static 'imgs/favicon.svg' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body style="background-color: #f2f7f3;">

{% include 'navbar.html' %}

<div class="container py-5">
    <div class="row">
        <!-- Imagem do produto -->
        <div class="col-md-6">
            {% if produto.imagens.first %}
                <img src="{{ produto.imagens.first.imagem.url }}" class="img-fluid rounded shadow-sm" alt="{{ produto.nome }}">
            {% else %}
                <img src="{% static 'imgs/placeholder.jpg' %}" class="img-fluid rounded" alt="Imagem indispon√≠vel">
            {% endif %}
        </div>

        <!-- Detalhes do produto -->
        <div class="col-md-6 bg-white rounded shadow-sm p-4">
            <h1 class="fw-bold text-success">{{ produto.nome }}</h1>
            <p class="mb-1"><strong>Produtor:</strong> {{ produto.produtor.primeiro_nome }} {{ produto.produtor.ultimo_nome }}</p>
            <p class="mb-1"><strong>Categoria:</strong> {{ produto.categoria.nome }}</p>
            <p class="mb-1"><strong>Quantidade:</strong> {{ produto.quantidade }}</p>
            <p class="mb-1"><strong>Modo de Produ√ß√£o:</strong> {{ produto.get_modo_producao_display }}</p>
            {% if produto.data_colheita %}
                <p class="mb-1"><strong>Data da Colheita:</strong> {{ produto.data_colheita|date:"d/m/Y" }}</p>
            {% endif %}
            <p class="fs-4 mt-3"><strong>Pre√ßo:</strong> {{ produto.preco }} ‚Ç¨</p>

            <!-- A√ß√£o do consumidor -->
            {% if user.is_authenticated and user.perfil == 'consumidor' %}
                <a href="{% url 'adicionar_ao_carrinho' produto.id %}" class="btn btn-success rounded-pill mt-3">üõí Adicionar ao Carrinho</a>
            {% elif not user.is_authenticated %}
                <p class="mt-3 text-muted">Inicia sess√£o para adicionar ao carrinho: <a href="{% url 'login' %}">Entrar</a></p>
            {% endif %}
        </div>
    </div>

    <!-- Descri√ß√£o -->
    <div class="row mt-5">
        <div class="col bg-white rounded p-4 shadow-sm">
            <h4 class="text-success">üìù Descri√ß√£o</h4>
            <p class="fs-5">{{ produto.descricao|linebreaks }}</p>
        </div>
    </div>
</div>

{% include 'footer.html' %}
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
</body>
</html>
